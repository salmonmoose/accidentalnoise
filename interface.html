<html>
	<head>
		<script type="text/javascript">
			workspace = []

			window.onload = function() {
				optionslist = AccidentalNoiseSequence.getLayerOptions();

				console.debug(optionslist);

				optionslist.forEach(function(layer) {
					console.log(layer);
				});

				toolbox = document.getElementById('toolbox');

				optionslist.forEach(function(layer) {

					layerDoubleInputList = AccidentalNoiseSequence.getLayerDoubleInputs((layer+'_interface').toLowerCase());
					layerIntInputList = AccidentalNoiseSequence.getLayerIntInputs((layer+'_interface').toLowerCase());
					layerNoiseInputList = AccidentalNoiseSequence.getLayerNoiseInputs((layer+'_interface').toLowerCase());

					new_li = document.createElement("li");
					button = document.getElementById("tool_button").cloneNode(true);

					button.setAttribute('id', layer+'_interface');
					button.style.display='inline';

					button.querySelector('img').src = 'noise://'+layer+'_interface?x=50&y=50';
					button.querySelector('h2').innerHTML = layer;

					new_li.appendChild(button);

					new_li.appendChild(inputList(layerDoubleInputList));
					new_li.appendChild(inputList(layerIntInputList));
					new_li.appendChild(inputList(layerNoiseInputList));

					toolbox.querySelector('ul').insertBefore(new_li);
				});
			}

			inputList = function(list) {
				new_ul = document.createElement("ul");

				list.forEach(function(input) {
					new_li = document.createElement("li");
					new_li.innerHTML = input;
					new_ul.appendChild(new_li);
				})

				return new_ul;
			}

			createLayer = function(type) {
				name = type+"_"+makeid;

				workspace.push(name);

				AccidentalNoiseSequence.createLayer(type, name);
			}

			makeid = function() {
				var text = "";
				var possible = "abcdef0123456789";

				for (var i = 0; i < 8; i++ ) {
					text += possible.charAt(Math.floor(Math.random() * possible.length));
				}

				return text;
			}
		</script>
		<style>
body
{
	background-color: rgb(127,127,127);
}

#toolbox
{

}

#toolbox ul
{
	margin: 0;
	padding: 0;
	list-style-type: none;
	text-align: center;
}

#toolbox ul li
{
	display: inline;
}

#toolbox ul li a
{
	text-decoration: none;
	padding: 0;
	background-color: rgb(95,95,95);
}

#toolbox h2
{
	display: inline;
	font-size: 12;
}
		</style>
	</head>
	<body>
		<div id="toolbox">
			<ul>
			</ul>
		</div>
		<div id="tool_button" style="display: none;">
			<a href="#">
				<img/>
				<h2></h2>
			</a>
		</div>
		<div id="noise_node">
			<div class="handle">
				<p></p>
			</div>
			<div class="node">

			</div>
		</div>
	</body>
</html>